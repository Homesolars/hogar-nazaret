---
layout: default
lazy_load: true
---
{% comment %}
  Displays upcoming events
{% endcomment %}

{% assign current_date = 'now' | date: '%s' | plus: 0 %}

<div class="container content-container">
  <section class="is-medium">
    <h1 class="is-size-3 has-text-centered">
      {{ page.title }}
    </h1>

    <hr />

    <div class="columns is-multiline is-nested mt-2">
      {% if page.lang == 'en' %}
        {% assign events = site.upcoming_events | sort:"date" | reverse %}
      {% else %}
        {% assign events = site.proximos_eventos | sort:"date" | reverse %}
      {% endif %}
      {% assign events_shown = false %}

      {% if events.size > 0 %}
        {% for upcoming_event in events %}
          {% assign event_date_to_compare = upcoming_event.date | date: '%s' | plus: 0 %}

          {% if event_date_to_compare < current_date %}
            {% continue %}
          {% endif %}
          {% assign events_shown = true %}

          <div class="column is-full mb-2 mt-1">
            <div class="columns is-desktop">
              <div class="column is-one-quarter">
                <h4 class="is-size-4">{{ upcoming_event.day_of_week }}</h4>
                <h1 class="is-size-1">
                  <date>{{ upcoming_event.date | date_to_string: "ordinal", "US" }}</date>
                </h1>
              </div>

              <div class="column">
                <div class="content">
                  <strong class="post-title">
                    <a class="is-size-4" href="{{ upcoming_event.url | relative_url }}">{{ upcoming_event.title }}</a>
                  </strong>
                  <p>
                    {% assign word_count = upcoming_event.content | split: ' ' | size %}
                    {% if word_count <= 50 %}
                      {{ upcoming_event.content }}
                    {% else %}
                      {{ upcoming_event.content | truncatewords: 50 }}
                    {% endif %}
                  </p>

                  <a href="{{ upcoming_event.url | relative_url }}" class="button is-outlined is-medium">
                    + {{ site.data.languages[page.lang].upcoming_events.event_details }}
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <h4 class="is-size-4 has-text-centered linear-primary-gradient is-full-width mt-2 mb-2">
          {{ site.data.languages[page.lang].upcoming_events.no_upcoming_events }}
        </h4>
      {% endif %}

      {% if events_shown == false %}
        <h4 class="is-size-4 has-text-centered linear-primary-gradient is-full-width mt-2 mb-2">
          {{ site.data.languages[page.lang].upcoming_events.no_upcoming_events }}
        </h4>
      {% endif %}
    </div>
  </section>
</div>
